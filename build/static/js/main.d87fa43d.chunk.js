(this.webpackJsonptetelise=this.webpackJsonptetelise||[]).push([[0],{20:function(e,t,c){},21:function(e,t,c){},27:function(e,t,c){"use strict";c.r(t);var n,r,o,a=c(0),i=c(10),b=c.n(i),u=(c(20),c(21),c(4)),s=c(7),j=function(){var e=Object(a.useState)({x:0,y:0}),t=Object(s.a)(e,2),c=t[0],n=t[1];return Object(a.useEffect)((function(){var e=function(e){var t=e.pageX,c=e.pageY;return n({x:t,y:c})};return document.addEventListener("mousemove",e),function(){return document.removeEventListener("mousemove",e)}})),[c]},l=c(3),O=c(2),f=c(29),d=c(28),v="board/INIT_BOARD",m="board/SET_BOARD",x=Object(f.a)(v),h=Object(f.a)(m,(function(e){return e})),g=new Array(20).fill(new Array(10).fill(0)),k=Object(d.a)((n={},Object(l.a)(n,v,(function(){return g})),Object(l.a)(n,m,(function(e,t){return t.payload})),n),g),T="game/START",N="game/END",p="game/GET_POINT",E="game/RESET",w={isStarted:!1,isOver:!1,score:0,best:0},I=Object(f.a)(T),S=Object(f.a)(N),y=Object(f.a)(p,(function(e){return e})),C=Object(f.a)(E),R=(Object(f.a)(N),Object(d.a)((r={},Object(l.a)(r,T,(function(e){return Object(O.a)(Object(O.a)({},e),{},{isStarted:!0})})),Object(l.a)(r,N,(function(e){return Object(O.a)(Object(O.a)({},e),{},{isOver:!0})})),Object(l.a)(r,p,(function(e,t){var c=t.payload;return Object(O.a)(Object(O.a)({},e),{},{score:e.score+10*c})})),Object(l.a)(r,E,(function(e){return Object(O.a)(Object(O.a)({},w),{},{best:Math.max(e.score,e.best)})})),r),w)),D="block/INIT",_="block/MOVE",F="block/SET_TOUCH",L="block/SET_DIRECTION",A=Object(f.a)(D),B=Object(f.a)(_,(function(e){return e})),G=Object(f.a)(F,(function(e){return e})),H=Object(f.a)(L,(function(e){return e})),P={row:0,col:4,isTouched:!1,direction:null},W=Object(d.a)((o={},Object(l.a)(o,D,(function(e){var t=e.direction;return Object(O.a)(Object(O.a)({},P),{},{direction:t})})),Object(l.a)(o,_,(function(e){var t=e.row,c=e.col,n=e.direction,r=c;return"LEFT"===n&&(r=0===c?c:c-1),"RIGHT"===n&&(r=c+1===9?c:c+1),{row:t+1===19?t:t+1,col:r,isTouched:t+1===19,direction:n}})),Object(l.a)(o,L,(function(e,t){var c=t.payload;return Object(O.a)(Object(O.a)({},e),{},{direction:c})})),Object(l.a)(o,F,(function(e){return Object(O.a)(Object(O.a)({},e),{},{isTouched:!0})})),o),P),J=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.block.isTouched})),c=Object(u.c)((function(e){return e.block.row})),n=Object(u.c)((function(e){return e.block.col})),r=j(),o=Object(s.a)(r,1)[0];return Object(a.useEffect)((function(){var t=setInterval((function(){return e((function(e,t){var c=t(),n=c.board,r=c.block,o=r.row,a=r.col,i=r.direction,b=o+2;-1!==n[o][a]?o+2!==20?n[b].slice(a,a+2).some((function(e){return-1===e}))?e(G()):("LEFT"===i&&a>0?(n[o][a-1]||n[o+1][a-1]||n[o+2][a-1])&&e(H("DOWN")):"RIGHT"===i&&a<18&&(n[o][a+2]||n[o+1][a+2]||n[o+2][a+2])&&e(H("DOWN")),e(B({row:o,col:a}))):e(G()):e(S())}))}),300);return function(){return clearInterval(t)}}),[e]),Object(a.useEffect)((function(){var r;t&&(e(A()),e((r={row:c,col:n},function(e,t){for(var c=t().board,n=r.row,o=r.col,a=c.map((function(e,t){return e.map((function(e,c){return t<n||n+1<t||c<o||o+1<c?e:-1}))})).filter((function(e){return!e.every((function(e){return-1===e}))})),i=20-a.length,b=0;i>b++;){var u=new Array(10).fill(0);a.unshift(u)}e(y(i)),e(h(a))})))}),[e,t,c,n]),Object(a.useEffect)((function(){var t=document.getElementById("block").getBoundingClientRect(),c=t.left,n=t.right,r=function(e){var t=e.x,c=e.left,n=e.right,r="DOWN";t<c?r="LEFT":t>n&&(r="RIGHT");return r}({x:o.x,left:c,right:n});e(H(r))}),[e,c,o]),[{row:c,col:n}]};var M=c(1),U=function(){var e=J(),t=Object(s.a)(e,1)[0],c={left:"".concat(34*t.col,"px"),top:"".concat(34*t.row,"px")};return Object(M.jsxs)("div",{id:"block",style:c,children:[Object(M.jsxs)("div",{className:"block-line",children:[Object(M.jsx)("div",{className:"block-line-box"}),Object(M.jsx)("div",{className:"block-line-box"})]}),Object(M.jsxs)("div",{className:"block-line",children:[Object(M.jsx)("div",{className:"block-line-box"}),Object(M.jsx)("div",{className:"block-line-box"})]})]})},V=function(){var e=Object(u.c)((function(e){return e.game.isStarted})),t=Object(u.c)((function(e){return e.game.isOver})),c=Object(u.c)((function(e){return e.board}));return Object(M.jsxs)("div",{className:"board",children:[t||e&&Object(M.jsx)(U,{}),c.map((function(e,t){return Object(M.jsx)(X,{children:e.map((function(e,c){return Object(M.jsx)(Y,{isStock:-1===e},"box_".concat(t,"_").concat(c))}))},"line_".concat(t))}))]})},X=function(e){var t=e.children;return Object(M.jsx)("div",{className:"board-line",children:t})},Y=function(e){var t=e.isStock;return Object(M.jsx)("div",{className:"board-line-box",style:{backgroundColor:t?"Sienna":"white"}})},q=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.game})),c=Object(a.useCallback)((function(){t.isStarted||e(I()),t.isOver&&(e(x()),e(C()))}),[e,t]);return Object(M.jsxs)("div",{className:"control",children:[Object(M.jsxs)("div",{className:"control-info",children:[Object(M.jsxs)("div",{children:["best: ",t.best]}),Object(M.jsxs)("div",{children:["score: ",t.score]})]}),Object(M.jsx)("button",{className:"control-button",onClick:c,children:t.isOver?"\ub2e4\uc2dc\ud558\uae30":t.isStarted?"\uac8c\uc784 \uc911...":"\uc2dc\uc791\ud558\uae30"})]})};var z=function(){return Object(M.jsx)("div",{className:"app",children:Object(M.jsxs)("div",{className:"wrap",children:[Object(M.jsx)(q,{}),Object(M.jsx)(V,{})]})})},K=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,30)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;c(e),n(e),r(e),o(e),a(e)}))},Q=c(9),Z=Object(Q.b)({block:W,board:k,game:R}),$=c(15),ee=Object(Q.c)(Z,Object(Q.a)($.a));b.a.render(Object(M.jsx)(u.a,{store:ee,children:Object(M.jsx)(z,{})}),document.getElementById("root")),K()}},[[27,1,2]]]);
//# sourceMappingURL=main.d87fa43d.chunk.js.map